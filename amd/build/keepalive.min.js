define(["jquery","core/config","core/log"],function(a,b,c){"use strict";function d(){a.ajax({url:b.wwwroot+"/lib/sessionkeepalive_ajax.php",dataType:"json",type:"POST",data:{sesskey:b.sesskey,time:a.now()},headers:{"Cache-Control":"no-cache",Expires:"-1"},error:function(a){403==a.status?clearInterval(g):a.status>=300&&a.status<=399&&c.debug("moodle-local_session_keepalive-keepalive: A cached copy of the keepalive answer was returned so it's reliablity cannot be guaranteed")}})}function e(){i===!0&&d()}function f(){i=!0,h.off("change keyup keydown",f)}var g=null,h=null,i=!1;return{init:function(b){null!==b.keepaliveinterval&&b.keepaliveinterval>0&&(h=a("#region-main input, #region-main textarea, #region-main select"),h.length>0&&(h.on("change keyup keydown",f),g=setInterval(e,1e3*b.keepaliveinterval*60)))}}});